"use strict";
;
(() => {
    const dotenv = require('dotenv');
    const pjson = require('../../package.json');
    dotenv.config({ path: './.msh' });
    dotenv.config({ path: './.msh-user' });
    const envToJson = (env, def) => {
        try {
            return JSON.parse(process.env[env]);
        }
        catch (_) {
            return def;
        }
    };
    const envToBoolean = (env, def) => {
        if ((env || '') === '')
            return def;
        return env.toLocaleLowerCase() === 'true';
    };
    global.projectName = pjson.name;
    global.projectVersion = pjson.version;
    global.config = Object.freeze({
        rootDir: process.env.ROOT_DIR || process.cwd() || './',
        projects: envToJson('PROJECTS', []),
        pullRequestSkip: envToJson('PULL_REQUEST_SKIP', []),
        git: {
            team: process.env.GIT_TEAM || '',
            projectPrefix: process.env.GIT_PROJECT_PREFIX || '',
            host: process.env.GIT_HOST || 'bitbucket.org',
            username: process.env.GIT_USERNAME || '',
        },
        dockerBaseImages: envToJson('DOCKER_BASE_IMAGES', []),
        cmd: {
            gitEnabled: envToBoolean(process.env.CMD_GIT_ENABLED, true),
            cleanEnabled: envToBoolean(process.env.CMD_CLEAN_ENABLED, true),
            npmEnabled: envToBoolean(process.env.CMD_NPM_ENABLED, true),
            prEnabled: envToBoolean(process.env.CMD_PR_ENABLED, true),
        },
    });
    global.exitAfterCommandExecuted = false;
})();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29uZmlnLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2NvbmZpZy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBMEJBLENBQUM7QUFBQSxDQUFDLEdBQUcsRUFBRTtJQUNMLE1BQU0sTUFBTSxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQTtJQUNoQyxNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsb0JBQW9CLENBQUMsQ0FBQTtJQUMzQyxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxDQUFDLENBQUE7SUFDakMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLElBQUksRUFBRSxhQUFhLEVBQUUsQ0FBQyxDQUFBO0lBRXRDLE1BQU0sU0FBUyxHQUFHLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBTyxFQUFFO1FBQ2xDLElBQUk7WUFDRixPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQVcsQ0FBQyxDQUFBO1NBQzlDO1FBQUMsT0FBTyxDQUFDLEVBQUU7WUFDVixPQUFPLEdBQUcsQ0FBQTtTQUNYO0lBQ0gsQ0FBQyxDQUFBO0lBQ0QsTUFBTSxZQUFZLEdBQUcsQ0FBQyxHQUFHLEVBQUUsR0FBWSxFQUFXLEVBQUU7UUFDbEQsSUFBSSxDQUFDLEdBQUcsSUFBSSxFQUFFLENBQUMsS0FBSyxFQUFFO1lBQUUsT0FBTyxHQUFHLENBQUE7UUFDbEMsT0FBTyxHQUFHLENBQUMsaUJBQWlCLEVBQUUsS0FBSyxNQUFNLENBQUE7SUFDM0MsQ0FBQyxDQUFBO0lBRUQsTUFBTSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFBO0lBQy9CLE1BQU0sQ0FBQyxjQUFjLEdBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQTtJQUNyQyxNQUFNLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUM7UUFDNUIsT0FBTyxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxJQUFJLE9BQU8sQ0FBQyxHQUFHLEVBQUUsSUFBSSxJQUFJO1FBQ3RELFFBQVEsRUFBRSxTQUFTLENBQUMsVUFBVSxFQUFFLEVBQUUsQ0FBQztRQUNuQyxlQUFlLEVBQUUsU0FBUyxDQUFDLG1CQUFtQixFQUFFLEVBQUUsQ0FBQztRQUNuRCxHQUFHLEVBQUU7WUFDSCxJQUFJLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRLElBQUksRUFBRTtZQUNoQyxhQUFhLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxrQkFBa0IsSUFBSSxFQUFFO1lBQ25ELElBQUksRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLFFBQVEsSUFBSSxlQUFlO1lBQzdDLFFBQVEsRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLFlBQVksSUFBSSxFQUFFO1NBQ3pDO1FBQ0QsZ0JBQWdCLEVBQUUsU0FBUyxDQUFDLG9CQUFvQixFQUFFLEVBQUUsQ0FBQztRQUNyRCxHQUFHLEVBQUU7WUFDSCxVQUFVLEVBQUUsWUFBWSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsZUFBZSxFQUFFLElBQUksQ0FBQztZQUMzRCxZQUFZLEVBQUUsWUFBWSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsaUJBQWlCLEVBQUUsSUFBSSxDQUFDO1lBQy9ELFVBQVUsRUFBRSxZQUFZLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxlQUFlLEVBQUUsSUFBSSxDQUFDO1lBQzNELFNBQVMsRUFBRSxZQUFZLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDO1NBQzFEO0tBQ0YsQ0FBQyxDQUFBO0lBQ0YsTUFBTSxDQUFDLHdCQUF3QixHQUFHLEtBQUssQ0FBQTtBQUN6QyxDQUFDLENBQUMsRUFBRSxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiZGVjbGFyZSBuYW1lc3BhY2UgTm9kZUpTIHtcbiAgaW50ZXJmYWNlIEdsb2JhbCB7XG4gICAgcHJvamVjdE5hbWU6IHN0cmluZ1xuICAgIHByb2plY3RWZXJzaW9uOiBzdHJpbmdcbiAgICBjb25maWc6IHtcbiAgICAgIHJvb3REaXI6IHN0cmluZ1xuICAgICAgcHJvamVjdHM6IHN0cmluZ1tdXG4gICAgICBwdWxsUmVxdWVzdFNraXA6IHN0cmluZ1tdXG4gICAgICBnaXQ6IHtcbiAgICAgICAgdGVhbTogc3RyaW5nXG4gICAgICAgIHByb2plY3RQcmVmaXg6IHN0cmluZ1xuICAgICAgICBob3N0OiBzdHJpbmdcbiAgICAgICAgdXNlcm5hbWU6IHN0cmluZ1xuICAgICAgfVxuICAgICAgZG9ja2VyQmFzZUltYWdlczogc3RyaW5nW11cbiAgICAgIGNtZDoge1xuICAgICAgICBnaXRFbmFibGVkOiBib29sZWFuXG4gICAgICAgIGNsZWFuRW5hYmxlZDogYm9vbGVhblxuICAgICAgICBucG1FbmFibGVkOiBib29sZWFuXG4gICAgICAgIHByRW5hYmxlZDogYm9vbGVhblxuICAgICAgfVxuICAgIH1cbiAgICBleGl0QWZ0ZXJDb21tYW5kRXhlY3V0ZWQ6IGJvb2xlYW5cbiAgfVxufVxuXG47KCgpID0+IHtcbiAgY29uc3QgZG90ZW52ID0gcmVxdWlyZSgnZG90ZW52JylcbiAgY29uc3QgcGpzb24gPSByZXF1aXJlKCcuLi8uLi9wYWNrYWdlLmpzb24nKVxuICBkb3RlbnYuY29uZmlnKHsgcGF0aDogJy4vLm1zaCcgfSlcbiAgZG90ZW52LmNvbmZpZyh7IHBhdGg6ICcuLy5tc2gtdXNlcicgfSlcblxuICBjb25zdCBlbnZUb0pzb24gPSAoZW52LCBkZWYpOiBhbnkgPT4ge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gSlNPTi5wYXJzZShwcm9jZXNzLmVudltlbnZdIGFzIHN0cmluZylcbiAgICB9IGNhdGNoIChfKSB7XG4gICAgICByZXR1cm4gZGVmXG4gICAgfVxuICB9XG4gIGNvbnN0IGVudlRvQm9vbGVhbiA9IChlbnYsIGRlZjogYm9vbGVhbik6IGJvb2xlYW4gPT4ge1xuICAgIGlmICgoZW52IHx8ICcnKSA9PT0gJycpIHJldHVybiBkZWZcbiAgICByZXR1cm4gZW52LnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09ICd0cnVlJ1xuICB9XG5cbiAgZ2xvYmFsLnByb2plY3ROYW1lID0gcGpzb24ubmFtZVxuICBnbG9iYWwucHJvamVjdFZlcnNpb24gPSBwanNvbi52ZXJzaW9uXG4gIGdsb2JhbC5jb25maWcgPSBPYmplY3QuZnJlZXplKHtcbiAgICByb290RGlyOiBwcm9jZXNzLmVudi5ST09UX0RJUiB8fCBwcm9jZXNzLmN3ZCgpIHx8ICcuLycsXG4gICAgcHJvamVjdHM6IGVudlRvSnNvbignUFJPSkVDVFMnLCBbXSksXG4gICAgcHVsbFJlcXVlc3RTa2lwOiBlbnZUb0pzb24oJ1BVTExfUkVRVUVTVF9TS0lQJywgW10pLFxuICAgIGdpdDoge1xuICAgICAgdGVhbTogcHJvY2Vzcy5lbnYuR0lUX1RFQU0gfHwgJycsXG4gICAgICBwcm9qZWN0UHJlZml4OiBwcm9jZXNzLmVudi5HSVRfUFJPSkVDVF9QUkVGSVggfHwgJycsXG4gICAgICBob3N0OiBwcm9jZXNzLmVudi5HSVRfSE9TVCB8fCAnYml0YnVja2V0Lm9yZycsXG4gICAgICB1c2VybmFtZTogcHJvY2Vzcy5lbnYuR0lUX1VTRVJOQU1FIHx8ICcnLFxuICAgIH0sXG4gICAgZG9ja2VyQmFzZUltYWdlczogZW52VG9Kc29uKCdET0NLRVJfQkFTRV9JTUFHRVMnLCBbXSksXG4gICAgY21kOiB7XG4gICAgICBnaXRFbmFibGVkOiBlbnZUb0Jvb2xlYW4ocHJvY2Vzcy5lbnYuQ01EX0dJVF9FTkFCTEVELCB0cnVlKSxcbiAgICAgIGNsZWFuRW5hYmxlZDogZW52VG9Cb29sZWFuKHByb2Nlc3MuZW52LkNNRF9DTEVBTl9FTkFCTEVELCB0cnVlKSxcbiAgICAgIG5wbUVuYWJsZWQ6IGVudlRvQm9vbGVhbihwcm9jZXNzLmVudi5DTURfTlBNX0VOQUJMRUQsIHRydWUpLFxuICAgICAgcHJFbmFibGVkOiBlbnZUb0Jvb2xlYW4ocHJvY2Vzcy5lbnYuQ01EX1BSX0VOQUJMRUQsIHRydWUpLFxuICAgIH0sXG4gIH0pXG4gIGdsb2JhbC5leGl0QWZ0ZXJDb21tYW5kRXhlY3V0ZWQgPSBmYWxzZVxufSkoKVxuIl19